#!/bin/bash

OUT_DIR="build/full"

echo ${OUT_DIR}/contracts
mkdir -p ${OUT_DIR}/contracts

echo "Flattening contracts..."

files=`find contracts -name '*.sol'`

for path in $files; do
    IFS='/'
    parts=( $path )
    name=${parts[${#parts[@]}-1]}
    echo "${path}"
    truffle-flattener "${path}" > "${OUT_DIR}/${name}"
done

echo "Done."
